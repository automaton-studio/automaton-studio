@page "/designer"
@page "/designer/{WorkflowId}"
@using Automaton.Studio.Activity
@using Automaton.Studio.Components
@using Plk.Blazor.DragDrop

<Layout>
    <Header Class="header">
        <Row>
            <Col Flex=@("none")>
            <Space Class="actions-bar">
                <SpaceItem>
                    <Button Type="dashed" Icon="save">
                        Save
                    </Button>
                </SpaceItem>
                <SpaceItem>
                    <Button Type="dashed" Icon="caret-right">
                        Run
                    </Button>
                </SpaceItem>
            </Space>
            </Col>

            @*<Col Class="right-actions">
                            <Space Class="right-header-items">
                                <SpaceItem>
                                    <Button Shape="link" Icon="question-circle" Class="action-button">
                                        <span class="action-label">Help</span>
                                    </Button>
                                </SpaceItem>
                            </Space>
                        </Col>*@
                </Row>
            </Header>

            <Layout Class="designer-container">
                <Sider Theme="SiderTheme.Light" Class="tree-sidebar">
                    <ActivitiesTree></ActivitiesTree>
                </Sider>

                <Content Class="dropzone-container">
                    <Dropzone Class="dropzone" @ref="dropzone" TItem="StudioActivity" Items="DesignerViewModel.Workflow.Activities" InstantReplace="true" OnItemDrop="@((p)=>CreateActivity(p))">
                        <StudioActivityComponent Activity=@context />
                    </Dropzone>
                </Content>
            </Layout>
        </Layout>

        <style>
            .designer-container {
                background-color: #FFF
            }

            .tree-sidebar {
                height: 100vh;
                overflow: auto
            }

            .dropzone-container {
                height: calc(100vh - 70px);
            }

            .dropzone {
                height: calc(100vh - 70px);
                overflow: auto;
            }
        </style>



