@using Automaton.Studio.Models

@if (TreeActivityViewModel.TreeItems == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <Tree ShowIcon 
        DataSource="@TreeActivityViewModel.TreeItems"
        TitleExpression="x => x.DataItem.DisplayName"
        ChildrenExpression="x => x.DataItem.Activities"
        IconExpression="x => x.DataItem.Icon"
        IsLeafExpression="x => x.DataItem.Activities == null || !x.DataItem.Activities.Any()"
        KeyExpression="x => x.DataItem.Name"
        Class="activities-tree"
        @bind-SelectedData="@TreeActivityViewModel.SelectedActivity"
        OnNodeDrag="@((i)=> { TreeActivityViewModel.DragActivity(i); })"
        TItem="TreeActivity">
    </Tree>
}

<style>
    .activities-tree {
        background-color: #fafafa;
        height: calc(100vh - 70px);
        overflow: auto
    }
</style>
